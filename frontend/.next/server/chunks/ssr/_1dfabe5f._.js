module.exports=[44732,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"BailoutToCSR",{enumerable:!0,get:function(){return e}});let d=a.r(12160);function e({reason:a,children:b}){throw Object.defineProperty(new d.BailoutToCSRError(a),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0})}},20445,(a,b,c)=>{"use strict";function d(a){return a.split("/").map(a=>encodeURIComponent(a)).join("/")}Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"encodeURIPath",{enumerable:!0,get:function(){return d}})},83247,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"PreloadChunks",{enumerable:!0,get:function(){return h}});let d=a.r(73232),e=a.r(35812),f=a.r(56704),g=a.r(20445);function h({moduleIds:a}){let b=f.workAsyncStorage.getStore();if(void 0===b)return null;let c=[];if(b.reactLoadableManifest&&a){let d=b.reactLoadableManifest;for(let b of a){if(!d[b])continue;let a=d[b].files;c.push(...a)}}return 0===c.length?null:(0,d.jsx)(d.Fragment,{children:c.map(a=>{let c=`${b.assetPrefix}/_next/${(0,g.encodeURIPath)(a)}`;return a.endsWith(".css")?(0,d.jsx)("link",{precedence:"dynamic",href:c,rel:"stylesheet",as:"style",nonce:b.nonce},a):((0,e.preload)(c,{as:"script",fetchPriority:"low",nonce:b.nonce}),null)})})}},30851,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return j}});let d=a.r(73232),e=a.r(25831),f=a.r(44732),g=a.r(83247);function h(a){return{default:a&&"default"in a?a.default:a}}let i={loader:()=>Promise.resolve(h(()=>null)),loading:null,ssr:!0},j=function(a){let b={...i,...a},c=(0,e.lazy)(()=>b.loader().then(h)),j=b.loading;function k(a){let h=j?(0,d.jsx)(j,{isLoading:!0,pastDelay:!0,error:null}):null,i=!b.ssr||!!b.loading,k=i?e.Suspense:e.Fragment,l=b.ssr?(0,d.jsxs)(d.Fragment,{children:[(0,d.jsx)(g.PreloadChunks,{moduleIds:b.modules}),(0,d.jsx)(c,{...a})]}):(0,d.jsx)(f.BailoutToCSR,{reason:"next/dynamic",children:(0,d.jsx)(c,{...a})});return(0,d.jsx)(k,{...i?{fallback:h}:{},children:l})}return k.displayName="LoadableComponent",k}},77941,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0}),Object.defineProperty(c,"default",{enumerable:!0,get:function(){return e}});let d=a.r(63652)._(a.r(30851));function e(a,b){let c={};"function"==typeof a&&(c.loader=a);let e={...c,...b};return(0,d.default)({...e,modules:e.loadableGenerated?.modules})}("function"==typeof c.default||"object"==typeof c.default&&null!==c.default)&&void 0===c.default.__esModule&&(Object.defineProperty(c.default,"__esModule",{value:!0}),Object.assign(c.default,c),b.exports=c.default)},20287,a=>{"use strict";var b=a.i(73232),c=a.i(25831),d=a.i(45459),e=a.i(26717),f=a.i(77941),g=a.i(40695),h=a.i(58754),i=a.i(17119),j=a.i(50917);let k=(0,a.i(61313).default)("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]);var l=a.i(70903),m=a.i(5522),n=a.i(17171),o=a.i(97895);function p({className:a,...c}){return(0,b.jsx)("textarea",{"data-slot":"textarea",className:(0,o.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),...c})}var q=a.i(3130),r=a.i(87682),s=a.i(65602),t=a.i(3103),u=a.i(46840),v=a.i(83308),w=a.i(79823);function x({onSuccess:a,onCancel:c}){let d=(0,v.useCreateBook)(),e=(0,w.usePermissions)(),f=(0,h.useForm)({resolver:(0,i.zodResolver)(u.bookCreateSchema),defaultValues:{title:"",description:"",pages_count:8,style:t.BookStyle.CARTOON}}),o=f.watch("pages_count"),x=async b=>{if(e.canCreateBooks)try{let c=await d.mutateAsync(b);f.reset(),a?.(c)}catch(a){}};return e.hasReachedBookLimit?(0,b.jsx)(q.Card,{children:(0,b.jsx)(q.CardContent,{className:"pt-6",children:(0,b.jsx)(s.Alert,{children:(0,b.jsxs)(s.AlertDescription,{children:["VocÃª atingiu o limite de livros para sua conta.",!e.canAccessPremium&&(0,b.jsx)("span",{className:"block mt-2",children:(0,b.jsx)(g.Button,{variant:"outline",size:"sm",children:"Fazer upgrade para Premium"})})]})})})}):(0,b.jsxs)(q.Card,{children:[(0,b.jsxs)(q.CardHeader,{children:[(0,b.jsxs)(q.CardTitle,{className:"flex items-center gap-2",children:[(0,b.jsx)(l.FileText,{className:"h-5 w-5"}),"Criar Novo Livro"]}),(0,b.jsx)(q.CardDescription,{children:"Defina os detalhes do seu livro de colorir personalizado"})]}),(0,b.jsx)(q.CardContent,{children:(0,b.jsxs)("form",{onSubmit:f.handleSubmit(x),className:"space-y-6",children:[d.error&&(0,b.jsx)(s.Alert,{variant:"destructive",children:(0,b.jsx)(s.AlertDescription,{children:d.error.message||"Erro ao criar livro. Tente novamente."})}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{htmlFor:"title",children:"TÃ­tulo do Livro"}),(0,b.jsx)(m.Input,{id:"title",placeholder:"Ex: Aventuras na Floresta MÃ¡gica",...f.register("title"),error:f.formState.errors.title?.message,disabled:d.isPending}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:[t.BOOK_CONSTRAINTS.MIN_TITLE_LENGTH,"-",t.BOOK_CONSTRAINTS.MAX_TITLE_LENGTH," caracteres"]})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{htmlFor:"description",children:"DescriÃ§Ã£o (Opcional)"}),(0,b.jsx)(p,{id:"description",placeholder:"Descreva o tema e estilo da sua histÃ³ria...",rows:3,...f.register("description"),error:f.formState.errors.description?.message,disabled:d.isPending}),(0,b.jsxs)("p",{className:"text-xs text-muted-foreground",children:["MÃ¡ximo ",t.BOOK_CONSTRAINTS.MAX_DESCRIPTION_LENGTH," caracteres"]})]}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)(n.Label,{children:["NÃºmero de PÃ¡ginas: ",o]}),(0,b.jsx)(h.Controller,{control:f.control,name:"pages_count",render:({field:a})=>(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsx)(m.Input,{type:"range",min:t.BOOK_CONSTRAINTS.MIN_PAGES,max:t.BOOK_CONSTRAINTS.MAX_PAGES,step:1,value:a.value,onChange:b=>a.onChange(Number(b.target.value)),disabled:d.isPending,className:"w-full"}),(0,b.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,b.jsxs)("span",{children:[t.BOOK_CONSTRAINTS.MIN_PAGES," pÃ¡ginas"]}),(0,b.jsxs)("span",{className:"font-medium",children:[a.value," pÃ¡ginas"]}),(0,b.jsxs)("span",{children:[t.BOOK_CONSTRAINTS.MAX_PAGES," pÃ¡ginas"]})]})]})}),f.formState.errors.pages_count&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:f.formState.errors.pages_count.message})]}),(0,b.jsxs)("div",{className:"space-y-2",children:[(0,b.jsx)(n.Label,{htmlFor:"style",children:"Estilo ArtÃ­stico"}),(0,b.jsx)(h.Controller,{control:f.control,name:"style",render:({field:a})=>(0,b.jsxs)(r.Select,{value:a.value,onValueChange:a.onChange,disabled:d.isPending,children:[(0,b.jsx)(r.SelectTrigger,{children:(0,b.jsx)(r.SelectValue,{placeholder:"Escolha um estilo"})}),(0,b.jsx)(r.SelectContent,{children:Object.values(t.BookStyle).map(a=>(0,b.jsx)(r.SelectItem,{value:a,children:(0,b.jsxs)("div",{className:"flex items-center gap-2",children:[(0,b.jsx)(k,{className:"h-4 w-4"}),t.bookHelpers.getStyleLabel(a)]})},a))})]})}),f.formState.errors.style&&(0,b.jsx)("p",{className:"text-sm text-destructive",children:f.formState.errors.style.message})]}),(0,b.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,b.jsx)(g.Button,{type:"submit",disabled:d.isPending||!e.canCreateBooks,className:"flex-1",children:d.isPending?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(j.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Criando..."]}):"Criar Livro"}),c&&(0,b.jsx)(g.Button,{type:"button",variant:"outline",onClick:c,disabled:d.isPending,children:"Cancelar"})]}),(0,b.jsxs)("div",{className:"text-xs text-muted-foreground bg-muted/50 p-3 rounded-md",children:[(0,b.jsx)("p",{className:"font-medium mb-1",children:"ðŸ’¡ Dica:"}),(0,b.jsx)("p",{children:"ApÃ³s criar o livro, vocÃª poderÃ¡ iniciar a geraÃ§Ã£o automÃ¡tica das pÃ¡ginas e imagens usando nossa IA. O processo leva alguns minutos dependendo do nÃºmero de pÃ¡ginas."})]})]})})]})}let y=(0,f.default)(async()=>{},{loadableGenerated:{modules:[98264]},ssr:!1,loading:()=>(0,b.jsx)("div",{className:"text-center p-8",children:"Carregando..."})});function z(){let a=(0,d.useRouter)(),[f,h]=(0,c.useState)(null),[i,j]=(0,c.useState)(!1),k=(0,v.useStartBookGeneration)(),l=async a=>{h(a),j(!0);try{await k.mutateAsync(a.id)}catch(a){console.error("Failed to start generation:",a),j(!1)}};return(0,b.jsxs)("div",{className:"space-y-6",children:[(0,b.jsxs)("div",{className:"flex items-center gap-4",children:[(0,b.jsxs)(g.Button,{variant:"ghost",size:"sm",onClick:()=>a.back(),children:[(0,b.jsx)(e.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Voltar"]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"Criar Novo Livro"}),(0,b.jsx)("p",{className:"text-muted-foreground",children:"Preencha os detalhes e nossa IA criarÃ¡ seu livro personalizado"})]})]}),i?(0,b.jsxs)("div",{className:"max-w-2xl mx-auto",children:[f&&(0,b.jsx)(y,{bookId:f.id,bookTitle:f.title,onComplete:()=>{f&&a.push(`/dashboard/books/${f.id}`)},onError:()=>{j(!1)}}),(0,b.jsxs)("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg",children:[(0,b.jsx)("h3",{className:"font-semibold mb-2",children:"Enquanto seu livro Ã© criado..."}),(0,b.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1",children:[(0,b.jsx)("li",{children:"â€¢ Nossa IA estÃ¡ analisando seus parÃ¢metros"}),(0,b.jsx)("li",{children:"â€¢ Gerando uma histÃ³ria Ãºnica e envolvente"}),(0,b.jsx)("li",{children:"â€¢ Criando ilustraÃ§Ãµes no estilo escolhido"}),(0,b.jsx)("li",{children:"â€¢ Organizando tudo em um belo livro de colorir"})]}),(0,b.jsx)("div",{className:"mt-4 p-3 bg-background rounded border-l-4 border-l-blue-500",children:(0,b.jsxs)("p",{className:"text-sm",children:["ðŸ’¡ ",(0,b.jsx)("strong",{children:"Dica:"})," VocÃª pode fechar esta pÃ¡gina. Enviaremos uma notificaÃ§Ã£o quando seu livro estiver pronto!"]})})]})]}):(0,b.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,b.jsx)(x,{onSuccess:l,onCancel:()=>a.back()})}),(0,b.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,b.jsxs)("div",{className:"flex items-center justify-center space-x-4",children:[(0,b.jsxs)("div",{className:`flex items-center ${!i?"text-primary":"text-muted-foreground"}`,children:[(0,b.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${!i?"bg-primary text-primary-foreground":"bg-muted"}`,children:"1"}),(0,b.jsx)("span",{className:"ml-2 text-sm",children:"ConfiguraÃ§Ã£o"})]}),(0,b.jsx)("div",{className:"flex-1 h-px bg-border mx-4"}),(0,b.jsxs)("div",{className:`flex items-center ${i?"text-primary":"text-muted-foreground"}`,children:[(0,b.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${i?"bg-primary text-primary-foreground":"bg-muted"}`,children:"2"}),(0,b.jsx)("span",{className:"ml-2 text-sm",children:"GeraÃ§Ã£o"})]}),(0,b.jsx)("div",{className:"flex-1 h-px bg-border mx-4"}),(0,b.jsxs)("div",{className:"flex items-center text-muted-foreground",children:[(0,b.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold bg-muted",children:"3"}),(0,b.jsx)("span",{className:"ml-2 text-sm",children:"ConcluÃ­do"})]})]})})]})}a.s(["default",()=>z],20287)}];

//# sourceMappingURL=_1dfabe5f._.js.map