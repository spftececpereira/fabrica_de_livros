module.exports=[3103,a=>{"use strict";var b,c,d=((b={}).DRAFT="draft",b.PROCESSING="processing",b.COMPLETED="completed",b.FAILED="failed",b),e=((c={}).CARTOON="cartoon",c.REALISTIC="realistic",c.MANGA="manga",c.CLASSIC="classic",c);let f={MIN_PAGES:5,MAX_PAGES:20,MIN_TITLE_LENGTH:3,MAX_TITLE_LENGTH:200,MAX_DESCRIPTION_LENGTH:1e3,VALID_STYLES:Object.values(e),VALID_STATUSES:Object.values(d)};a.s(["BOOK_CONSTRAINTS",0,f,"BookStatus",()=>d,"BookStyle",()=>e,"bookHelpers",0,{isEditable:a=>["draft","failed"].includes(a.status),isProcessing:a=>"processing"===a.status,isCompleted:a=>"completed"===a.status,canGeneratePdf:a=>"completed"===a.status&&a.pages.length===a.pages_count,getStyleLabel:a=>({cartoon:"Cartoon",realistic:"Realista",manga:"Mangá",classic:"Clássico"})[a]||a,getStatusLabel:a=>({draft:"Rascunho",processing:"Processando",completed:"Concluído",failed:"Falhou"})[a]||a,getStatusColor:a=>{let b={draft:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300",processing:"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-300",completed:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-300",failed:"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-300"};return b[a]||b.draft}}])},63652,(a,b,c)=>{"use strict";c._=function(a){return a&&a.__esModule?a:{default:a}}},49558,a=>{"use strict";let b=(0,a.i(61313).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);a.s(["ChevronDownIcon",()=>b],49558)},70903,a=>{"use strict";let b=(0,a.i(61313).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);a.s(["FileText",()=>b],70903)},83308,a=>{"use strict";var b=a.i(13728),c=a.i(40278),d=a.i(554),e=a.i(19691),f=class extends d.QueryObserver{constructor(a,b){super(a,b)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(a){super.setOptions({...a,behavior:(0,e.infiniteQueryBehavior)()})}getOptimisticResult(a){return a.behavior=(0,e.infiniteQueryBehavior)(),super.getOptimisticResult(a)}fetchNextPage(a){return this.fetch({...a,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(a){return this.fetch({...a,meta:{fetchMore:{direction:"backward"}}})}createResult(a,b){let{state:c}=a,d=super.createResult(a,b),{isFetching:f,isRefetching:g,isError:h,isRefetchError:i}=d,j=c.fetchMeta?.fetchMore?.direction,k=h&&"forward"===j,l=f&&"forward"===j,m=h&&"backward"===j,n=f&&"backward"===j;return{...d,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,e.hasNextPage)(b,c.data),hasPreviousPage:(0,e.hasPreviousPage)(b,c.data),isFetchNextPageError:k,isFetchingNextPage:l,isFetchPreviousPageError:m,isFetchingPreviousPage:n,isRefetchError:i&&!k&&!m,isRefetching:g&&!l&&!n}}},g=a.i(57222),h=a.i(56916),i=a.i(53250),j=a.i(90511),k=a.i(4956),l=a.i(3103);let m=(0,k.create)((a,b)=>({selectedBook:null,recentBooks:[],bookCache:{},generatingBooks:new Set,generationProgress:{},setSelectedBook:c=>{a({selectedBook:c}),c&&!b().bookCache[c.id]&&b().addToCache(c)},addToCache:b=>{a(a=>({bookCache:{...a.bookCache,[b.id]:b}}))},removeFromCache:b=>{a(a=>{let c={...a.bookCache};return delete c[b],{bookCache:c,selectedBook:a.selectedBook?.id===b?null:a.selectedBook,recentBooks:a.recentBooks.filter(a=>a.id!==b)}})},updateBookInCache:(b,c)=>{a(a=>{let d=a.bookCache[b];if(!d)return a;let e={...d,...c};return{bookCache:{...a.bookCache,[b]:e},selectedBook:a.selectedBook?.id===b?e:a.selectedBook,recentBooks:a.recentBooks.map(a=>a.id===b?e:a)}})},setRecentBooks:c=>{a({recentBooks:c}),c.forEach(a=>{b().addToCache(a)})},startGeneration:(c,d)=>{a(a=>({generatingBooks:new Set([...a.generatingBooks,c]),generationProgress:{...a.generationProgress,[c]:{taskId:d,progress:0,status:"pending",message:"Iniciando geração..."}}})),b().updateBookInCache(c,{status:l.BookStatus.PROCESSING})},updateGeneration:(b,c,d,e)=>{a(a=>{let f=a.generationProgress[b];return f?{generationProgress:{...a.generationProgress,[b]:{...f,progress:c,status:d,message:e}}}:a})},completeGeneration:(c,d)=>{a(a=>{let b=new Set(a.generatingBooks);b.delete(c);let d={...a.generationProgress};return delete d[c],{generatingBooks:b,generationProgress:d}}),d?b().addToCache(d):b().updateBookInCache(c,{status:l.BookStatus.COMPLETED})},clearGeneration:c=>{a(a=>{let b=new Set(a.generatingBooks);b.delete(c);let d={...a.generationProgress};return delete d[c],{generatingBooks:b,generationProgress:d}}),b().updateBookInCache(c,{status:l.BookStatus.FAILED})}})),n=()=>{let a=m();return{...a,isGenerating:b=>a.generatingBooks.has(b),getGenerationProgress:b=>a.generationProgress[b]||null,getCachedBook:b=>a.bookCache[b]||null,getBooksByStatus:b=>a.recentBooks.filter(a=>a.status===b),getCompletedBooks:()=>a.recentBooks.filter(a=>a.status===l.BookStatus.COMPLETED),getDraftBooks:()=>a.recentBooks.filter(a=>a.status===l.BookStatus.DRAFT),getProcessingBooks:()=>a.recentBooks.filter(a=>a.status===l.BookStatus.PROCESSING)}};a.s(["useBook",0,a=>{let{addToCache:c,getCachedBook:d}=n();return(0,b.useQuery)({queryKey:j.queryKeys.books.detail(a),queryFn:async()=>{let b=await i.api.get(`/api/v1/books/${a}`);return c(b),b},enabled:!!a,staleTime:3e5,initialData:()=>d(a)||void 0})},"useBooks",0,a=>{var b;return b={queryKey:j.queryKeys.books.list(a),queryFn:async({pageParam:b=0})=>{let c=new URLSearchParams({skip:b.toString(),limit:(a?.limit||20).toString(),...a?.status_filter&&{status_filter:a.status_filter},...a?.style_filter&&{style_filter:a.style_filter},...a?.search&&{search:a.search},...a?.sort_by&&{sort_by:a.sort_by},...a?.sort_order&&{sort_order:a.sort_order}});return i.api.get(`/api/v1/books?${c.toString()}`)},initialPageParam:0,getNextPageParam:a=>{if(a.has_next)return a.skip+a.limit},staleTime:12e4},(0,g.useBaseQuery)(b,f,void 0)},"useCreateBook",0,()=>{let{addToCache:a}=n();return(0,c.useMutation)({mutationFn:async a=>i.api.post("/api/v1/books",a),onSuccess:b=>{a(b),j.invalidateQueries.books.lists(),j.invalidateQueries.books.stats(),h.toast.success("Livro criado com sucesso!")},onError:a=>{h.toast.error(a.message||"Erro ao criar livro")}})},"useDownloadPDF",0,()=>(0,c.useMutation)({mutationFn:async({bookId:a,filename:b})=>(0,i.downloadFile)(`/api/v1/books/${a}/pdf`,b),onSuccess:()=>{h.toast.success("Download iniciado!")},onError:a=>{h.toast.error(a.message||"Erro ao baixar PDF")}}),"useStartBookGeneration",0,()=>{let{startGeneration:a}=n();return(0,c.useMutation)({mutationFn:async a=>i.api.post(`/api/v1/books/${a}/generate`),onSuccess:(b,c)=>{a(c,b.task_id),h.toast.success("Geração do livro iniciada!")},onError:a=>{h.toast.error(a.message||"Erro ao iniciar geração do livro")}})}],83308)},26717,a=>{"use strict";let b=(0,a.i(61313).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);a.s(["ArrowLeft",()=>b],26717)}];

//# sourceMappingURL=_d5d2f0ba._.js.map