(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,37054,e=>{"use strict";var t,r,o=((t={}).DRAFT="draft",t.PROCESSING="processing",t.COMPLETED="completed",t.FAILED="failed",t),s=((r={}).CARTOON="cartoon",r.REALISTIC="realistic",r.MANGA="manga",r.CLASSIC="classic",r);let a={MIN_PAGES:5,MAX_PAGES:20,MIN_TITLE_LENGTH:3,MAX_TITLE_LENGTH:200,MAX_DESCRIPTION_LENGTH:1e3,VALID_STYLES:Object.values(s),VALID_STATUSES:Object.values(o)};e.s(["BOOK_CONSTRAINTS",0,a,"BookStatus",()=>o,"BookStyle",()=>s,"bookHelpers",0,{isEditable:e=>["draft","failed"].includes(e.status),isProcessing:e=>"processing"===e.status,isCompleted:e=>"completed"===e.status,canGeneratePdf:e=>"completed"===e.status&&e.pages.length===e.pages_count,getStyleLabel:e=>({cartoon:"Cartoon",realistic:"Realista",manga:"MangÃ¡",classic:"ClÃ¡ssico"})[e]||e,getStatusLabel:e=>({draft:"Rascunho",processing:"Processando",completed:"ConcluÃ­do",failed:"Falhou"})[e]||e,getStatusColor:e=>{let t={draft:"bg-gray-100 text-gray-800 dark:bg-gray-800 dark:text-gray-300",processing:"bg-yellow-100 text-yellow-800 dark:bg-yellow-800 dark:text-yellow-300",completed:"bg-green-100 text-green-800 dark:bg-green-800 dark:text-green-300",failed:"bg-red-100 text-red-800 dark:bg-red-800 dark:text-red-300"};return t[e]||t.draft}}])},59377,e=>{"use strict";let t=(0,e.i(52594).default)("chevron-down",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);e.s(["ChevronDownIcon",()=>t],59377)},86660,e=>{"use strict";let t=(0,e.i(52594).default)("file-text",[["path",{d:"M6 22a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h8a2.4 2.4 0 0 1 1.704.706l3.588 3.588A2.4 2.4 0 0 1 20 8v12a2 2 0 0 1-2 2z",key:"1oefj6"}],["path",{d:"M14 2v5a1 1 0 0 0 1 1h5",key:"wfsgrz"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);e.s(["FileText",()=>t],86660)},30553,e=>{"use strict";var t=e.i(64891),r=e.i(86745),o=e.i(74274),s=e.i(41790),a=class extends o.QueryObserver{constructor(e,t){super(e,t)}bindMethods(){super.bindMethods(),this.fetchNextPage=this.fetchNextPage.bind(this),this.fetchPreviousPage=this.fetchPreviousPage.bind(this)}setOptions(e){super.setOptions({...e,behavior:(0,s.infiniteQueryBehavior)()})}getOptimisticResult(e){return e.behavior=(0,s.infiniteQueryBehavior)(),super.getOptimisticResult(e)}fetchNextPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"forward"}}})}fetchPreviousPage(e){return this.fetch({...e,meta:{fetchMore:{direction:"backward"}}})}createResult(e,t){let{state:r}=e,o=super.createResult(e,t),{isFetching:a,isRefetching:n,isError:l,isRefetchError:i}=o,d=r.fetchMeta?.fetchMore?.direction,c=l&&"forward"===d,u=a&&"forward"===d,p=l&&"backward"===d,f=a&&"backward"===d;return{...o,fetchNextPage:this.fetchNextPage,fetchPreviousPage:this.fetchPreviousPage,hasNextPage:(0,s.hasNextPage)(t,r.data),hasPreviousPage:(0,s.hasPreviousPage)(t,r.data),isFetchNextPageError:c,isFetchingNextPage:u,isFetchPreviousPageError:p,isFetchingPreviousPage:f,isRefetchError:i&&!c&&!p,isRefetching:n&&!u&&!f}}},n=e.i(59105),l=e.i(95403),i=e.i(54858),d=e.i(44047),c=e.i(62792),u=e.i(37054);let p=(0,c.create)((e,t)=>({selectedBook:null,recentBooks:[],bookCache:{},generatingBooks:new Set,generationProgress:{},setSelectedBook:r=>{e({selectedBook:r}),r&&!t().bookCache[r.id]&&t().addToCache(r)},addToCache:t=>{e(e=>({bookCache:{...e.bookCache,[t.id]:t}}))},removeFromCache:t=>{e(e=>{let r={...e.bookCache};return delete r[t],{bookCache:r,selectedBook:e.selectedBook?.id===t?null:e.selectedBook,recentBooks:e.recentBooks.filter(e=>e.id!==t)}})},updateBookInCache:(t,r)=>{e(e=>{let o=e.bookCache[t];if(!o)return e;let s={...o,...r};return{bookCache:{...e.bookCache,[t]:s},selectedBook:e.selectedBook?.id===t?s:e.selectedBook,recentBooks:e.recentBooks.map(e=>e.id===t?s:e)}})},setRecentBooks:r=>{e({recentBooks:r}),r.forEach(e=>{t().addToCache(e)})},startGeneration:(r,o)=>{e(e=>({generatingBooks:new Set([...e.generatingBooks,r]),generationProgress:{...e.generationProgress,[r]:{taskId:o,progress:0,status:"pending",message:"Iniciando geraÃ§Ã£o..."}}})),t().updateBookInCache(r,{status:u.BookStatus.PROCESSING})},updateGeneration:(t,r,o,s)=>{e(e=>{let a=e.generationProgress[t];return a?{generationProgress:{...e.generationProgress,[t]:{...a,progress:r,status:o,message:s}}}:e})},completeGeneration:(r,o)=>{e(e=>{let t=new Set(e.generatingBooks);t.delete(r);let o={...e.generationProgress};return delete o[r],{generatingBooks:t,generationProgress:o}}),o?t().addToCache(o):t().updateBookInCache(r,{status:u.BookStatus.COMPLETED})},clearGeneration:r=>{e(e=>{let t=new Set(e.generatingBooks);t.delete(r);let o={...e.generationProgress};return delete o[r],{generatingBooks:t,generationProgress:o}}),t().updateBookInCache(r,{status:u.BookStatus.FAILED})}})),f=()=>{let e=p();return{...e,isGenerating:t=>e.generatingBooks.has(t),getGenerationProgress:t=>e.generationProgress[t]||null,getCachedBook:t=>e.bookCache[t]||null,getBooksByStatus:t=>e.recentBooks.filter(e=>e.status===t),getCompletedBooks:()=>e.recentBooks.filter(e=>e.status===u.BookStatus.COMPLETED),getDraftBooks:()=>e.recentBooks.filter(e=>e.status===u.BookStatus.DRAFT),getProcessingBooks:()=>e.recentBooks.filter(e=>e.status===u.BookStatus.PROCESSING)}};e.s(["useBook",0,e=>{let{addToCache:r,getCachedBook:o}=f();return(0,t.useQuery)({queryKey:d.queryKeys.books.detail(e),queryFn:async()=>{let t=await i.api.get(`/api/v1/books/${e}`);return r(t),t},enabled:!!e,staleTime:3e5,initialData:()=>o(e)||void 0})},"useBooks",0,e=>{var t;return t={queryKey:d.queryKeys.books.list(e),queryFn:async({pageParam:t=0})=>{let r=new URLSearchParams({skip:t.toString(),limit:(e?.limit||20).toString(),...e?.status_filter&&{status_filter:e.status_filter},...e?.style_filter&&{style_filter:e.style_filter},...e?.search&&{search:e.search},...e?.sort_by&&{sort_by:e.sort_by},...e?.sort_order&&{sort_order:e.sort_order}});return i.api.get(`/api/v1/books?${r.toString()}`)},initialPageParam:0,getNextPageParam:e=>{if(e.has_next)return e.skip+e.limit},staleTime:12e4},(0,n.useBaseQuery)(t,a,void 0)},"useCreateBook",0,()=>{let{addToCache:e}=f();return(0,r.useMutation)({mutationFn:async e=>i.api.post("/api/v1/books",e),onSuccess:t=>{e(t),d.invalidateQueries.books.lists(),d.invalidateQueries.books.stats(),l.toast.success("Livro criado com sucesso!")},onError:e=>{l.toast.error(e.message||"Erro ao criar livro")}})},"useDownloadPDF",0,()=>(0,r.useMutation)({mutationFn:async({bookId:e,filename:t})=>(0,i.downloadFile)(`/api/v1/books/${e}/pdf`,t),onSuccess:()=>{l.toast.success("Download iniciado!")},onError:e=>{l.toast.error(e.message||"Erro ao baixar PDF")}}),"useStartBookGeneration",0,()=>{let{startGeneration:e}=f();return(0,r.useMutation)({mutationFn:async e=>i.api.post(`/api/v1/books/${e}/generate`),onSuccess:(t,r)=>{e(r,t.task_id),l.toast.success("GeraÃ§Ã£o do livro iniciada!")},onError:e=>{l.toast.error(e.message||"Erro ao iniciar geraÃ§Ã£o do livro")}})}],30553)},15089,e=>{"use strict";let t=(0,e.i(52594).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);e.s(["ArrowLeft",()=>t],15089)},62870,e=>{"use strict";var t=e.i(32086),r=e.i(89762),o=e.i(38782);function s(e,[t,r]){return Math.min(r,Math.max(t,e))}var a=e.i(91967),n=e.i(66153),l=e.i(34127),i=e.i(11623),d=e.i(14744),c=e.i(52168),u=e.i(43430),p=e.i(15010),f=e.i(19104),m=e.i(96334),h=e.i(86108),g=e.i(85108),x=e.i(36740),v=e.i(74123),y=e.i(60600),b=e.i(92762),w=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"});r.forwardRef((e,r)=>(0,t.jsx)(g.Primitive.span,{...e,ref:r,style:{...w,...e.style}})).displayName="VisuallyHidden";var j=e.i(73772),S=e.i(22719),C=[" ","Enter","ArrowUp","ArrowDown"],k=[" ","Enter"],P="Select",[N,E,T]=(0,n.createCollection)(P),[R,B]=(0,i.createContextScope)(P,[T,m.createPopperScope]),_=(0,m.createPopperScope)(),[I,O]=R(P),[L,A]=R(P),M=e=>{let{__scopeSelect:o,children:s,open:a,defaultOpen:n,onOpenChange:l,value:i,defaultValue:c,onValueChange:u,dir:p,name:h,autoComplete:g,disabled:x,required:v,form:b}=e,w=_(o),[j,S]=r.useState(null),[C,k]=r.useState(null),[E,T]=r.useState(!1),R=(0,d.useDirection)(p),[B,O]=(0,y.useControllableState)({prop:a,defaultProp:n??!1,onChange:l,caller:P}),[A,M]=(0,y.useControllableState)({prop:i,defaultProp:c,onChange:u,caller:P}),D=r.useRef(null),H=!j||b||!!j.closest("form"),[F,z]=r.useState(new Set),G=Array.from(F).map(e=>e.props.value).join(";");return(0,t.jsx)(m.Root,{...w,children:(0,t.jsxs)(I,{required:v,scope:o,trigger:j,onTriggerChange:S,valueNode:C,onValueNodeChange:k,valueNodeHasChildren:E,onValueNodeHasChildrenChange:T,contentId:(0,f.useId)(),value:A,onValueChange:M,open:B,onOpenChange:O,dir:R,triggerPointerDownPosRef:D,disabled:x,children:[(0,t.jsx)(N.Provider,{scope:o,children:(0,t.jsx)(L,{scope:e.__scopeSelect,onNativeOptionAdd:r.useCallback(e=>{z(t=>new Set(t).add(e))},[]),onNativeOptionRemove:r.useCallback(e=>{z(t=>{let r=new Set(t);return r.delete(e),r})},[]),children:s})}),H?(0,t.jsxs)(eb,{"aria-hidden":!0,required:v,tabIndex:-1,name:h,autoComplete:g,value:A,onChange:e=>M(e.target.value),disabled:x,form:b,children:[void 0===A?(0,t.jsx)("option",{value:""}):null,Array.from(F)]},G):null]})})};M.displayName=P;var D="SelectTrigger",H=r.forwardRef((e,o)=>{let{__scopeSelect:s,disabled:n=!1,...i}=e,d=_(s),c=O(D,s),u=c.disabled||n,p=(0,l.useComposedRefs)(o,c.onTriggerChange),f=E(s),h=r.useRef("touch"),[x,v,y]=ej(e=>{let t=f().filter(e=>!e.disabled),r=t.find(e=>e.value===c.value),o=eS(t,e,r);void 0!==o&&c.onValueChange(o.value)}),b=e=>{u||(c.onOpenChange(!0),y()),e&&(c.triggerPointerDownPosRef.current={x:Math.round(e.pageX),y:Math.round(e.pageY)})};return(0,t.jsx)(m.Anchor,{asChild:!0,...d,children:(0,t.jsx)(g.Primitive.button,{type:"button",role:"combobox","aria-controls":c.contentId,"aria-expanded":c.open,"aria-required":c.required,"aria-autocomplete":"none",dir:c.dir,"data-state":c.open?"open":"closed",disabled:u,"data-disabled":u?"":void 0,"data-placeholder":ew(c.value)?"":void 0,...i,ref:p,onClick:(0,a.composeEventHandlers)(i.onClick,e=>{e.currentTarget.focus(),"mouse"!==h.current&&b(e)}),onPointerDown:(0,a.composeEventHandlers)(i.onPointerDown,e=>{h.current=e.pointerType;let t=e.target;t.hasPointerCapture(e.pointerId)&&t.releasePointerCapture(e.pointerId),0===e.button&&!1===e.ctrlKey&&"mouse"===e.pointerType&&(b(e),e.preventDefault())}),onKeyDown:(0,a.composeEventHandlers)(i.onKeyDown,e=>{let t=""!==x.current;e.ctrlKey||e.altKey||e.metaKey||1!==e.key.length||v(e.key),(!t||" "!==e.key)&&C.includes(e.key)&&(b(),e.preventDefault())})})})});H.displayName=D;var F="SelectValue",z=r.forwardRef((e,r)=>{let{__scopeSelect:o,className:s,style:a,children:n,placeholder:i="",...d}=e,c=O(F,o),{onValueNodeHasChildrenChange:u}=c,p=void 0!==n,f=(0,l.useComposedRefs)(r,c.onValueNodeChange);return(0,b.useLayoutEffect)(()=>{u(p)},[u,p]),(0,t.jsx)(g.Primitive.span,{...d,ref:f,style:{pointerEvents:"none"},children:ew(c.value)?(0,t.jsx)(t.Fragment,{children:i}):n})});z.displayName=F;var G=r.forwardRef((e,r)=>{let{__scopeSelect:o,children:s,...a}=e;return(0,t.jsx)(g.Primitive.span,{"aria-hidden":!0,...a,ref:r,children:s||"â–¼"})});G.displayName="SelectIcon";var K=e=>(0,t.jsx)(h.Portal,{asChild:!0,...e});K.displayName="SelectPortal";var V="SelectContent",U=r.forwardRef((e,s)=>{let a=O(V,e.__scopeSelect),[n,l]=r.useState();return((0,b.useLayoutEffect)(()=>{l(new DocumentFragment)},[]),a.open)?(0,t.jsx)(X,{...e,ref:s}):n?o.createPortal((0,t.jsx)(q,{scope:e.__scopeSelect,children:(0,t.jsx)(N.Slot,{scope:e.__scopeSelect,children:(0,t.jsx)("div",{children:e.children})})}),n):null});U.displayName=V;var[q,W]=R(V),$=(0,x.createSlot)("SelectContent.RemoveScroll"),X=r.forwardRef((e,o)=>{let{__scopeSelect:s,position:n="item-aligned",onCloseAutoFocus:i,onEscapeKeyDown:d,onPointerDownOutside:f,side:m,sideOffset:h,align:g,alignOffset:x,arrowPadding:v,collisionBoundary:y,collisionPadding:b,sticky:w,hideWhenDetached:C,avoidCollisions:k,...P}=e,N=O(V,s),[T,R]=r.useState(null),[B,_]=r.useState(null),I=(0,l.useComposedRefs)(o,e=>R(e)),[L,A]=r.useState(null),[M,D]=r.useState(null),H=E(s),[F,z]=r.useState(!1),G=r.useRef(!1);r.useEffect(()=>{if(T)return(0,j.hideOthers)(T)},[T]),(0,u.useFocusGuards)();let K=r.useCallback(e=>{let[t,...r]=H().map(e=>e.ref.current),[o]=r.slice(-1),s=document.activeElement;for(let r of e)if(r===s||(r?.scrollIntoView({block:"nearest"}),r===t&&B&&(B.scrollTop=0),r===o&&B&&(B.scrollTop=B.scrollHeight),r?.focus(),document.activeElement!==s))return},[H,B]),U=r.useCallback(()=>K([L,T]),[K,L,T]);r.useEffect(()=>{F&&U()},[F,U]);let{onOpenChange:W,triggerPointerDownPosRef:X}=N;r.useEffect(()=>{if(T){let e={x:0,y:0},t=t=>{e={x:Math.abs(Math.round(t.pageX)-(X.current?.x??0)),y:Math.abs(Math.round(t.pageY)-(X.current?.y??0))}},r=r=>{e.x<=10&&e.y<=10?r.preventDefault():T.contains(r.target)||W(!1),document.removeEventListener("pointermove",t),X.current=null};return null!==X.current&&(document.addEventListener("pointermove",t),document.addEventListener("pointerup",r,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",t),document.removeEventListener("pointerup",r,{capture:!0})}}},[T,W,X]),r.useEffect(()=>{let e=()=>W(!1);return window.addEventListener("blur",e),window.addEventListener("resize",e),()=>{window.removeEventListener("blur",e),window.removeEventListener("resize",e)}},[W]);let[Z,J]=ej(e=>{let t=H().filter(e=>!e.disabled),r=t.find(e=>e.ref.current===document.activeElement),o=eS(t,e,r);o&&setTimeout(()=>o.ref.current.focus())}),ee=r.useCallback((e,t,r)=>{let o=!G.current&&!r;(void 0!==N.value&&N.value===t||o)&&(A(e),o&&(G.current=!0))},[N.value]),et=r.useCallback(()=>T?.focus(),[T]),er=r.useCallback((e,t,r)=>{let o=!G.current&&!r;(void 0!==N.value&&N.value===t||o)&&D(e)},[N.value]),eo="popper"===n?Y:Q,es=eo===Y?{side:m,sideOffset:h,align:g,alignOffset:x,arrowPadding:v,collisionBoundary:y,collisionPadding:b,sticky:w,hideWhenDetached:C,avoidCollisions:k}:{};return(0,t.jsx)(q,{scope:s,content:T,viewport:B,onViewportChange:_,itemRefCallback:ee,selectedItem:L,onItemLeave:et,itemTextRefCallback:er,focusSelectedItem:U,selectedItemText:M,position:n,isPositioned:F,searchRef:Z,children:(0,t.jsx)(S.RemoveScroll,{as:$,allowPinchZoom:!0,children:(0,t.jsx)(p.FocusScope,{asChild:!0,trapped:N.open,onMountAutoFocus:e=>{e.preventDefault()},onUnmountAutoFocus:(0,a.composeEventHandlers)(i,e=>{N.trigger?.focus({preventScroll:!0}),e.preventDefault()}),children:(0,t.jsx)(c.DismissableLayer,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:d,onPointerDownOutside:f,onFocusOutside:e=>e.preventDefault(),onDismiss:()=>N.onOpenChange(!1),children:(0,t.jsx)(eo,{role:"listbox",id:N.contentId,"data-state":N.open?"open":"closed",dir:N.dir,onContextMenu:e=>e.preventDefault(),...P,...es,onPlaced:()=>z(!0),ref:I,style:{display:"flex",flexDirection:"column",outline:"none",...P.style},onKeyDown:(0,a.composeEventHandlers)(P.onKeyDown,e=>{let t=e.ctrlKey||e.altKey||e.metaKey;if("Tab"===e.key&&e.preventDefault(),t||1!==e.key.length||J(e.key),["ArrowUp","ArrowDown","Home","End"].includes(e.key)){let t=H().filter(e=>!e.disabled).map(e=>e.ref.current);if(["ArrowUp","End"].includes(e.key)&&(t=t.slice().reverse()),["ArrowUp","ArrowDown"].includes(e.key)){let r=e.target,o=t.indexOf(r);t=t.slice(o+1)}setTimeout(()=>K(t)),e.preventDefault()}})})})})})})});X.displayName="SelectContentImpl";var Q=r.forwardRef((e,o)=>{let{__scopeSelect:a,onPlaced:n,...i}=e,d=O(V,a),c=W(V,a),[u,p]=r.useState(null),[f,m]=r.useState(null),h=(0,l.useComposedRefs)(o,e=>m(e)),x=E(a),v=r.useRef(!1),y=r.useRef(!0),{viewport:w,selectedItem:j,selectedItemText:S,focusSelectedItem:C}=c,k=r.useCallback(()=>{if(d.trigger&&d.valueNode&&u&&f&&w&&j&&S){let e=d.trigger.getBoundingClientRect(),t=f.getBoundingClientRect(),r=d.valueNode.getBoundingClientRect(),o=S.getBoundingClientRect();if("rtl"!==d.dir){let a=o.left-t.left,n=r.left-a,l=e.left-n,i=e.width+l,d=Math.max(i,t.width),c=s(n,[10,Math.max(10,window.innerWidth-10-d)]);u.style.minWidth=i+"px",u.style.left=c+"px"}else{let a=t.right-o.right,n=window.innerWidth-r.right-a,l=window.innerWidth-e.right-n,i=e.width+l,d=Math.max(i,t.width),c=s(n,[10,Math.max(10,window.innerWidth-10-d)]);u.style.minWidth=i+"px",u.style.right=c+"px"}let a=x(),l=window.innerHeight-20,i=w.scrollHeight,c=window.getComputedStyle(f),p=parseInt(c.borderTopWidth,10),m=parseInt(c.paddingTop,10),h=parseInt(c.borderBottomWidth,10),g=p+m+i+parseInt(c.paddingBottom,10)+h,y=Math.min(5*j.offsetHeight,g),b=window.getComputedStyle(w),C=parseInt(b.paddingTop,10),k=parseInt(b.paddingBottom,10),P=e.top+e.height/2-10,N=j.offsetHeight/2,E=p+m+(j.offsetTop+N);if(E<=P){let e=a.length>0&&j===a[a.length-1].ref.current;u.style.bottom="0px";let t=Math.max(l-P,N+(e?k:0)+(f.clientHeight-w.offsetTop-w.offsetHeight)+h);u.style.height=E+t+"px"}else{let e=a.length>0&&j===a[0].ref.current;u.style.top="0px";let t=Math.max(P,p+w.offsetTop+(e?C:0)+N);u.style.height=t+(g-E)+"px",w.scrollTop=E-P+w.offsetTop}u.style.margin="10px 0",u.style.minHeight=y+"px",u.style.maxHeight=l+"px",n?.(),requestAnimationFrame(()=>v.current=!0)}},[x,d.trigger,d.valueNode,u,f,w,j,S,d.dir,n]);(0,b.useLayoutEffect)(()=>k(),[k]);let[P,N]=r.useState();(0,b.useLayoutEffect)(()=>{f&&N(window.getComputedStyle(f).zIndex)},[f]);let T=r.useCallback(e=>{e&&!0===y.current&&(k(),C?.(),y.current=!1)},[k,C]);return(0,t.jsx)(Z,{scope:a,contentWrapper:u,shouldExpandOnScrollRef:v,onScrollButtonChange:T,children:(0,t.jsx)("div",{ref:p,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:P},children:(0,t.jsx)(g.Primitive.div,{...i,ref:h,style:{boxSizing:"border-box",maxHeight:"100%",...i.style}})})})});Q.displayName="SelectItemAlignedPosition";var Y=r.forwardRef((e,r)=>{let{__scopeSelect:o,align:s="start",collisionPadding:a=10,...n}=e,l=_(o);return(0,t.jsx)(m.Content,{...l,...n,ref:r,align:s,collisionPadding:a,style:{boxSizing:"border-box",...n.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});Y.displayName="SelectPopperPosition";var[Z,J]=R(V,{}),ee="SelectViewport",et=r.forwardRef((e,o)=>{let{__scopeSelect:s,nonce:n,...i}=e,d=W(ee,s),c=J(ee,s),u=(0,l.useComposedRefs)(o,d.onViewportChange),p=r.useRef(0);return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:n}),(0,t.jsx)(N.Slot,{scope:s,children:(0,t.jsx)(g.Primitive.div,{"data-radix-select-viewport":"",role:"presentation",...i,ref:u,style:{position:"relative",flex:1,overflow:"hidden auto",...i.style},onScroll:(0,a.composeEventHandlers)(i.onScroll,e=>{let t=e.currentTarget,{contentWrapper:r,shouldExpandOnScrollRef:o}=c;if(o?.current&&r){let e=Math.abs(p.current-t.scrollTop);if(e>0){let o=window.innerHeight-20,s=Math.max(parseFloat(r.style.minHeight),parseFloat(r.style.height));if(s<o){let a=s+e,n=Math.min(o,a),l=a-n;r.style.height=n+"px","0px"===r.style.bottom&&(t.scrollTop=l>0?l:0,r.style.justifyContent="flex-end")}}}p.current=t.scrollTop})})})]})});et.displayName=ee;var er="SelectGroup",[eo,es]=R(er);r.forwardRef((e,r)=>{let{__scopeSelect:o,...s}=e,a=(0,f.useId)();return(0,t.jsx)(eo,{scope:o,id:a,children:(0,t.jsx)(g.Primitive.div,{role:"group","aria-labelledby":a,...s,ref:r})})}).displayName=er;var ea="SelectLabel";r.forwardRef((e,r)=>{let{__scopeSelect:o,...s}=e,a=es(ea,o);return(0,t.jsx)(g.Primitive.div,{id:a.id,...s,ref:r})}).displayName=ea;var en="SelectItem",[el,ei]=R(en),ed=r.forwardRef((e,o)=>{let{__scopeSelect:s,value:n,disabled:i=!1,textValue:d,...c}=e,u=O(en,s),p=W(en,s),m=u.value===n,[h,x]=r.useState(d??""),[v,y]=r.useState(!1),b=(0,l.useComposedRefs)(o,e=>p.itemRefCallback?.(e,n,i)),w=(0,f.useId)(),j=r.useRef("touch"),S=()=>{i||(u.onValueChange(n),u.onOpenChange(!1))};if(""===n)throw Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return(0,t.jsx)(el,{scope:s,value:n,disabled:i,textId:w,isSelected:m,onItemTextChange:r.useCallback(e=>{x(t=>t||(e?.textContent??"").trim())},[]),children:(0,t.jsx)(N.ItemSlot,{scope:s,value:n,disabled:i,textValue:h,children:(0,t.jsx)(g.Primitive.div,{role:"option","aria-labelledby":w,"data-highlighted":v?"":void 0,"aria-selected":m&&v,"data-state":m?"checked":"unchecked","aria-disabled":i||void 0,"data-disabled":i?"":void 0,tabIndex:i?void 0:-1,...c,ref:b,onFocus:(0,a.composeEventHandlers)(c.onFocus,()=>y(!0)),onBlur:(0,a.composeEventHandlers)(c.onBlur,()=>y(!1)),onClick:(0,a.composeEventHandlers)(c.onClick,()=>{"mouse"!==j.current&&S()}),onPointerUp:(0,a.composeEventHandlers)(c.onPointerUp,()=>{"mouse"===j.current&&S()}),onPointerDown:(0,a.composeEventHandlers)(c.onPointerDown,e=>{j.current=e.pointerType}),onPointerMove:(0,a.composeEventHandlers)(c.onPointerMove,e=>{j.current=e.pointerType,i?p.onItemLeave?.():"mouse"===j.current&&e.currentTarget.focus({preventScroll:!0})}),onPointerLeave:(0,a.composeEventHandlers)(c.onPointerLeave,e=>{e.currentTarget===document.activeElement&&p.onItemLeave?.()}),onKeyDown:(0,a.composeEventHandlers)(c.onKeyDown,e=>{(p.searchRef?.current===""||" "!==e.key)&&(k.includes(e.key)&&S()," "===e.key&&e.preventDefault())})})})})});ed.displayName=en;var ec="SelectItemText",eu=r.forwardRef((e,s)=>{let{__scopeSelect:a,className:n,style:i,...d}=e,c=O(ec,a),u=W(ec,a),p=ei(ec,a),f=A(ec,a),[m,h]=r.useState(null),x=(0,l.useComposedRefs)(s,e=>h(e),p.onItemTextChange,e=>u.itemTextRefCallback?.(e,p.value,p.disabled)),v=m?.textContent,y=r.useMemo(()=>(0,t.jsx)("option",{value:p.value,disabled:p.disabled,children:v},p.value),[p.disabled,p.value,v]),{onNativeOptionAdd:w,onNativeOptionRemove:j}=f;return(0,b.useLayoutEffect)(()=>(w(y),()=>j(y)),[w,j,y]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(g.Primitive.span,{id:p.textId,...d,ref:x}),p.isSelected&&c.valueNode&&!c.valueNodeHasChildren?o.createPortal(d.children,c.valueNode):null]})});eu.displayName=ec;var ep="SelectItemIndicator",ef=r.forwardRef((e,r)=>{let{__scopeSelect:o,...s}=e;return ei(ep,o).isSelected?(0,t.jsx)(g.Primitive.span,{"aria-hidden":!0,...s,ref:r}):null});ef.displayName=ep;var em="SelectScrollUpButton",eh=r.forwardRef((e,o)=>{let s=W(em,e.__scopeSelect),a=J(em,e.__scopeSelect),[n,i]=r.useState(!1),d=(0,l.useComposedRefs)(o,a.onScrollButtonChange);return(0,b.useLayoutEffect)(()=>{if(s.viewport&&s.isPositioned){let e=function(){i(t.scrollTop>0)},t=s.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[s.viewport,s.isPositioned]),n?(0,t.jsx)(ev,{...e,ref:d,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=s;e&&t&&(e.scrollTop=e.scrollTop-t.offsetHeight)}}):null});eh.displayName=em;var eg="SelectScrollDownButton",ex=r.forwardRef((e,o)=>{let s=W(eg,e.__scopeSelect),a=J(eg,e.__scopeSelect),[n,i]=r.useState(!1),d=(0,l.useComposedRefs)(o,a.onScrollButtonChange);return(0,b.useLayoutEffect)(()=>{if(s.viewport&&s.isPositioned){let e=function(){let e=t.scrollHeight-t.clientHeight;i(Math.ceil(t.scrollTop)<e)},t=s.viewport;return e(),t.addEventListener("scroll",e),()=>t.removeEventListener("scroll",e)}},[s.viewport,s.isPositioned]),n?(0,t.jsx)(ev,{...e,ref:d,onAutoScroll:()=>{let{viewport:e,selectedItem:t}=s;e&&t&&(e.scrollTop=e.scrollTop+t.offsetHeight)}}):null});ex.displayName=eg;var ev=r.forwardRef((e,o)=>{let{__scopeSelect:s,onAutoScroll:n,...l}=e,i=W("SelectScrollButton",s),d=r.useRef(null),c=E(s),u=r.useCallback(()=>{null!==d.current&&(window.clearInterval(d.current),d.current=null)},[]);return r.useEffect(()=>()=>u(),[u]),(0,b.useLayoutEffect)(()=>{let e=c().find(e=>e.ref.current===document.activeElement);e?.ref.current?.scrollIntoView({block:"nearest"})},[c]),(0,t.jsx)(g.Primitive.div,{"aria-hidden":!0,...l,ref:o,style:{flexShrink:0,...l.style},onPointerDown:(0,a.composeEventHandlers)(l.onPointerDown,()=>{null===d.current&&(d.current=window.setInterval(n,50))}),onPointerMove:(0,a.composeEventHandlers)(l.onPointerMove,()=>{i.onItemLeave?.(),null===d.current&&(d.current=window.setInterval(n,50))}),onPointerLeave:(0,a.composeEventHandlers)(l.onPointerLeave,()=>{u()})})});r.forwardRef((e,r)=>{let{__scopeSelect:o,...s}=e;return(0,t.jsx)(g.Primitive.div,{"aria-hidden":!0,...s,ref:r})}).displayName="SelectSeparator";var ey="SelectArrow";r.forwardRef((e,r)=>{let{__scopeSelect:o,...s}=e,a=_(o),n=O(ey,o),l=W(ey,o);return n.open&&"popper"===l.position?(0,t.jsx)(m.Arrow,{...a,...s,ref:r}):null}).displayName=ey;var eb=r.forwardRef(({__scopeSelect:e,value:o,...s},a)=>{let n,i=r.useRef(null),d=(0,l.useComposedRefs)(a,i),c=(n=r.useRef({value:o,previous:o}),r.useMemo(()=>(n.current.value!==o&&(n.current.previous=n.current.value,n.current.value=o),n.current.previous),[o]));return r.useEffect(()=>{let e=i.current;if(!e)return;let t=Object.getOwnPropertyDescriptor(window.HTMLSelectElement.prototype,"value").set;if(c!==o&&t){let r=new Event("change",{bubbles:!0});t.call(e,o),e.dispatchEvent(r)}},[c,o]),(0,t.jsx)(g.Primitive.select,{...s,style:{...w,...s.style},ref:d,defaultValue:o})});function ew(e){return""===e||void 0===e}function ej(e){let t=(0,v.useCallbackRef)(e),o=r.useRef(""),s=r.useRef(0),a=r.useCallback(e=>{let r=o.current+e;t(r),function e(t){o.current=t,window.clearTimeout(s.current),""!==t&&(s.current=window.setTimeout(()=>e(""),1e3))}(r)},[t]),n=r.useCallback(()=>{o.current="",window.clearTimeout(s.current)},[]);return r.useEffect(()=>()=>window.clearTimeout(s.current),[]),[o,a,n]}function eS(e,t,r){var o,s;let a=t.length>1&&Array.from(t).every(e=>e===t[0])?t[0]:t,n=r?e.indexOf(r):-1,l=(o=e,s=Math.max(n,0),o.map((e,t)=>o[(s+t)%o.length]));1===a.length&&(l=l.filter(e=>e!==r));let i=l.find(e=>e.textValue.toLowerCase().startsWith(a.toLowerCase()));return i!==r?i:void 0}eb.displayName="SelectBubbleInput";var eC=e.i(28815),ek=e.i(59377);let eP=(0,e.i(52594).default)("chevron-up",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);var eN=e.i(47163);function eE({...e}){return(0,t.jsx)(M,{"data-slot":"select",...e})}function eT({...e}){return(0,t.jsx)(z,{"data-slot":"select-value",...e})}function eR({className:e,size:r="default",children:o,...s}){return(0,t.jsxs)(H,{"data-slot":"select-trigger","data-size":r,className:(0,eN.cn)("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...s,children:[o,(0,t.jsx)(G,{asChild:!0,children:(0,t.jsx)(ek.ChevronDownIcon,{className:"size-4 opacity-50"})})]})}function eB({className:e,children:r,position:o="popper",...s}){return(0,t.jsx)(K,{children:(0,t.jsxs)(U,{"data-slot":"select-content",className:(0,eN.cn)("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md","popper"===o&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:o,...s,children:[(0,t.jsx)(eI,{}),(0,t.jsx)(et,{className:(0,eN.cn)("p-1","popper"===o&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:r}),(0,t.jsx)(eO,{})]})})}function e_({className:e,children:r,...o}){return(0,t.jsxs)(ed,{"data-slot":"select-item",className:(0,eN.cn)("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...o,children:[(0,t.jsx)("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:(0,t.jsx)(ef,{children:(0,t.jsx)(eC.CheckIcon,{className:"size-4"})})}),(0,t.jsx)(eu,{children:r})]})}function eI({className:e,...r}){return(0,t.jsx)(eh,{"data-slot":"select-scroll-up-button",className:(0,eN.cn)("flex cursor-default items-center justify-center py-1",e),...r,children:(0,t.jsx)(eP,{className:"size-4"})})}function eO({className:e,...r}){return(0,t.jsx)(ex,{"data-slot":"select-scroll-down-button",className:(0,eN.cn)("flex cursor-default items-center justify-center py-1",e),...r,children:(0,t.jsx)(ek.ChevronDownIcon,{className:"size-4"})})}e.s(["Select",()=>eE,"SelectContent",()=>eB,"SelectItem",()=>e_,"SelectTrigger",()=>eR,"SelectValue",()=>eT],62870)},65011,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"BailoutToCSR",{enumerable:!0,get:function(){return s}});let o=e.r(61466);function s({reason:e,children:t}){if("undefined"==typeof window)throw Object.defineProperty(new o.BailoutToCSRError(e),"__NEXT_ERROR_CODE",{value:"E394",enumerable:!1,configurable:!0});return t}},39298,(e,t,r)=>{"use strict";function o(e){return e.split("/").map(e=>encodeURIComponent(e)).join("/")}Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"encodeURIPath",{enumerable:!0,get:function(){return o}})},58408,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"PreloadChunks",{enumerable:!0,get:function(){return l}});let o=e.r(32086),s=e.r(38782),a=e.r(82395),n=e.r(39298);function l({moduleIds:e}){if("undefined"!=typeof window)return null;let t=a.workAsyncStorage.getStore();if(void 0===t)return null;let r=[];if(t.reactLoadableManifest&&e){let o=t.reactLoadableManifest;for(let t of e){if(!o[t])continue;let e=o[t].files;r.push(...e)}}return 0===r.length?null:(0,o.jsx)(o.Fragment,{children:r.map(e=>{let r=`${t.assetPrefix}/_next/${(0,n.encodeURIPath)(e)}`;return e.endsWith(".css")?(0,o.jsx)("link",{precedence:"dynamic",href:r,rel:"stylesheet",as:"style",nonce:t.nonce},e):((0,s.preload)(r,{as:"script",fetchPriority:"low",nonce:t.nonce}),null)})})}},95950,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return d}});let o=e.r(32086),s=e.r(89762),a=e.r(65011),n=e.r(58408);function l(e){return{default:e&&"default"in e?e.default:e}}let i={loader:()=>Promise.resolve(l(()=>null)),loading:null,ssr:!0},d=function(e){let t={...i,...e},r=(0,s.lazy)(()=>t.loader().then(l)),d=t.loading;function c(e){let l=d?(0,o.jsx)(d,{isLoading:!0,pastDelay:!0,error:null}):null,i=!t.ssr||!!t.loading,c=i?s.Suspense:s.Fragment,u=t.ssr?(0,o.jsxs)(o.Fragment,{children:["undefined"==typeof window?(0,o.jsx)(n.PreloadChunks,{moduleIds:t.modules}):null,(0,o.jsx)(r,{...e})]}):(0,o.jsx)(a.BailoutToCSR,{reason:"next/dynamic",children:(0,o.jsx)(r,{...e})});return(0,o.jsx)(c,{...i?{fallback:l}:{},children:u})}return c.displayName="LoadableComponent",c}},62077,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),Object.defineProperty(r,"default",{enumerable:!0,get:function(){return s}});let o=e.r(81258)._(e.r(95950));function s(e,t){let r={};"function"==typeof e&&(r.loader=e);let s={...r,...t};return(0,o.default)({...s,modules:s.loadableGenerated?.modules})}("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},32052,e=>{"use strict";var t=e.i(32086),r=e.i(89762),o=e.i(66815),s=e.i(15089),a=e.i(62077),n=e.i(67881),l=e.i(35789),i=e.i(8838),d=e.i(49533);let c=(0,e.i(52594).default)("palette",[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]]);var u=e.i(86660),p=e.i(23750),f=e.i(10708),m=e.i(47163);function h({className:e,...r}){return(0,t.jsx)("textarea",{"data-slot":"textarea",className:(0,m.cn)("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...r})}var g=e.i(70065),x=e.i(62870),v=e.i(81947),y=e.i(37054),b=e.i(93866),w=e.i(30553),j=e.i(34663);function S({onSuccess:e,onCancel:r}){let o=(0,w.useCreateBook)(),s=(0,j.usePermissions)(),a=(0,l.useForm)({resolver:(0,i.zodResolver)(b.bookCreateSchema),defaultValues:{title:"",description:"",pages_count:8,style:y.BookStyle.CARTOON}}),m=a.watch("pages_count"),S=async t=>{if(s.canCreateBooks)try{let r=await o.mutateAsync(t);a.reset(),e?.(r)}catch(e){}};return s.hasReachedBookLimit?(0,t.jsx)(g.Card,{children:(0,t.jsx)(g.CardContent,{className:"pt-6",children:(0,t.jsx)(v.Alert,{children:(0,t.jsxs)(v.AlertDescription,{children:["VocÃª atingiu o limite de livros para sua conta.",!s.canAccessPremium&&(0,t.jsx)("span",{className:"block mt-2",children:(0,t.jsx)(n.Button,{variant:"outline",size:"sm",children:"Fazer upgrade para Premium"})})]})})})}):(0,t.jsxs)(g.Card,{children:[(0,t.jsxs)(g.CardHeader,{children:[(0,t.jsxs)(g.CardTitle,{className:"flex items-center gap-2",children:[(0,t.jsx)(u.FileText,{className:"h-5 w-5"}),"Criar Novo Livro"]}),(0,t.jsx)(g.CardDescription,{children:"Defina os detalhes do seu livro de colorir personalizado"})]}),(0,t.jsx)(g.CardContent,{children:(0,t.jsxs)("form",{onSubmit:a.handleSubmit(S),className:"space-y-6",children:[o.error&&(0,t.jsx)(v.Alert,{variant:"destructive",children:(0,t.jsx)(v.AlertDescription,{children:o.error.message||"Erro ao criar livro. Tente novamente."})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(f.Label,{htmlFor:"title",children:"TÃ­tulo do Livro"}),(0,t.jsx)(p.Input,{id:"title",placeholder:"Ex: Aventuras na Floresta MÃ¡gica",...a.register("title"),error:a.formState.errors.title?.message,disabled:o.isPending}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:[y.BOOK_CONSTRAINTS.MIN_TITLE_LENGTH,"-",y.BOOK_CONSTRAINTS.MAX_TITLE_LENGTH," caracteres"]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(f.Label,{htmlFor:"description",children:"DescriÃ§Ã£o (Opcional)"}),(0,t.jsx)(h,{id:"description",placeholder:"Descreva o tema e estilo da sua histÃ³ria...",rows:3,...a.register("description"),error:a.formState.errors.description?.message,disabled:o.isPending}),(0,t.jsxs)("p",{className:"text-xs text-muted-foreground",children:["MÃ¡ximo ",y.BOOK_CONSTRAINTS.MAX_DESCRIPTION_LENGTH," caracteres"]})]}),(0,t.jsxs)("div",{className:"space-y-4",children:[(0,t.jsxs)(f.Label,{children:["NÃºmero de PÃ¡ginas: ",m]}),(0,t.jsx)(l.Controller,{control:a.control,name:"pages_count",render:({field:e})=>(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)(p.Input,{type:"range",min:y.BOOK_CONSTRAINTS.MIN_PAGES,max:y.BOOK_CONSTRAINTS.MAX_PAGES,step:1,value:e.value,onChange:t=>e.onChange(Number(t.target.value)),disabled:o.isPending,className:"w-full"}),(0,t.jsxs)("div",{className:"flex justify-between text-xs text-muted-foreground",children:[(0,t.jsxs)("span",{children:[y.BOOK_CONSTRAINTS.MIN_PAGES," pÃ¡ginas"]}),(0,t.jsxs)("span",{className:"font-medium",children:[e.value," pÃ¡ginas"]}),(0,t.jsxs)("span",{children:[y.BOOK_CONSTRAINTS.MAX_PAGES," pÃ¡ginas"]})]})]})}),a.formState.errors.pages_count&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:a.formState.errors.pages_count.message})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)(f.Label,{htmlFor:"style",children:"Estilo ArtÃ­stico"}),(0,t.jsx)(l.Controller,{control:a.control,name:"style",render:({field:e})=>(0,t.jsxs)(x.Select,{value:e.value,onValueChange:e.onChange,disabled:o.isPending,children:[(0,t.jsx)(x.SelectTrigger,{children:(0,t.jsx)(x.SelectValue,{placeholder:"Escolha um estilo"})}),(0,t.jsx)(x.SelectContent,{children:Object.values(y.BookStyle).map(e=>(0,t.jsx)(x.SelectItem,{value:e,children:(0,t.jsxs)("div",{className:"flex items-center gap-2",children:[(0,t.jsx)(c,{className:"h-4 w-4"}),y.bookHelpers.getStyleLabel(e)]})},e))})]})}),a.formState.errors.style&&(0,t.jsx)("p",{className:"text-sm text-destructive",children:a.formState.errors.style.message})]}),(0,t.jsxs)("div",{className:"flex gap-3 pt-4",children:[(0,t.jsx)(n.Button,{type:"submit",disabled:o.isPending||!s.canCreateBooks,className:"flex-1",children:o.isPending?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Loader2,{className:"mr-2 h-4 w-4 animate-spin"}),"Criando..."]}):"Criar Livro"}),r&&(0,t.jsx)(n.Button,{type:"button",variant:"outline",onClick:r,disabled:o.isPending,children:"Cancelar"})]}),(0,t.jsxs)("div",{className:"text-xs text-muted-foreground bg-muted/50 p-3 rounded-md",children:[(0,t.jsx)("p",{className:"font-medium mb-1",children:"ðŸ’¡ Dica:"}),(0,t.jsx)("p",{children:"ApÃ³s criar o livro, vocÃª poderÃ¡ iniciar a geraÃ§Ã£o automÃ¡tica das pÃ¡ginas e imagens usando nossa IA. O processo leva alguns minutos dependendo do nÃºmero de pÃ¡ginas."})]})]})})]})}let C=(0,a.default)(()=>e.A(31304).then(e=>({default:e.BookGenerationProgress})),{loadableGenerated:{modules:[98264]},ssr:!1,loading:()=>(0,t.jsx)("div",{className:"text-center p-8",children:"Carregando..."})});function k(){let e=(0,o.useRouter)(),[a,l]=(0,r.useState)(null),[i,d]=(0,r.useState)(!1),c=(0,w.useStartBookGeneration)(),u=async e=>{l(e),d(!0);try{await c.mutateAsync(e.id)}catch(e){console.error("Failed to start generation:",e),d(!1)}};return(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)(n.Button,{variant:"ghost",size:"sm",onClick:()=>e.back(),children:[(0,t.jsx)(s.ArrowLeft,{className:"h-4 w-4 mr-2"}),"Voltar"]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"Criar Novo Livro"}),(0,t.jsx)("p",{className:"text-muted-foreground",children:"Preencha os detalhes e nossa IA criarÃ¡ seu livro personalizado"})]})]}),i?(0,t.jsxs)("div",{className:"max-w-2xl mx-auto",children:[a&&(0,t.jsx)(C,{bookId:a.id,bookTitle:a.title,onComplete:()=>{a&&e.push(`/dashboard/books/${a.id}`)},onError:()=>{d(!1)}}),(0,t.jsxs)("div",{className:"mt-6 p-4 bg-muted/50 rounded-lg",children:[(0,t.jsx)("h3",{className:"font-semibold mb-2",children:"Enquanto seu livro Ã© criado..."}),(0,t.jsxs)("ul",{className:"text-sm text-muted-foreground space-y-1",children:[(0,t.jsx)("li",{children:"â€¢ Nossa IA estÃ¡ analisando seus parÃ¢metros"}),(0,t.jsx)("li",{children:"â€¢ Gerando uma histÃ³ria Ãºnica e envolvente"}),(0,t.jsx)("li",{children:"â€¢ Criando ilustraÃ§Ãµes no estilo escolhido"}),(0,t.jsx)("li",{children:"â€¢ Organizando tudo em um belo livro de colorir"})]}),(0,t.jsx)("div",{className:"mt-4 p-3 bg-background rounded border-l-4 border-l-blue-500",children:(0,t.jsxs)("p",{className:"text-sm",children:["ðŸ’¡ ",(0,t.jsx)("strong",{children:"Dica:"})," VocÃª pode fechar esta pÃ¡gina. Enviaremos uma notificaÃ§Ã£o quando seu livro estiver pronto!"]})})]})]}):(0,t.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,t.jsx)(S,{onSuccess:u,onCancel:()=>e.back()})}),(0,t.jsx)("div",{className:"max-w-2xl mx-auto",children:(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-4",children:[(0,t.jsxs)("div",{className:`flex items-center ${!i?"text-primary":"text-muted-foreground"}`,children:[(0,t.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${!i?"bg-primary text-primary-foreground":"bg-muted"}`,children:"1"}),(0,t.jsx)("span",{className:"ml-2 text-sm",children:"ConfiguraÃ§Ã£o"})]}),(0,t.jsx)("div",{className:"flex-1 h-px bg-border mx-4"}),(0,t.jsxs)("div",{className:`flex items-center ${i?"text-primary":"text-muted-foreground"}`,children:[(0,t.jsx)("div",{className:`w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold ${i?"bg-primary text-primary-foreground":"bg-muted"}`,children:"2"}),(0,t.jsx)("span",{className:"ml-2 text-sm",children:"GeraÃ§Ã£o"})]}),(0,t.jsx)("div",{className:"flex-1 h-px bg-border mx-4"}),(0,t.jsxs)("div",{className:"flex items-center text-muted-foreground",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full flex items-center justify-center text-sm font-bold bg-muted",children:"3"}),(0,t.jsx)("span",{className:"ml-2 text-sm",children:"ConcluÃ­do"})]})]})})]})}e.s(["default",()=>k],32052)},31304,e=>{e.v(t=>Promise.all(["static/chunks/6f5454160f0ef21c.js"].map(t=>e.l(t))).then(()=>t(98264)))}]);