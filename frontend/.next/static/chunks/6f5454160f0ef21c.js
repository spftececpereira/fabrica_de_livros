(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,87336,e=>{"use strict";var s=e.i(32086),t=e.i(89762),a=e.i(11623),r=e.i(85108),l="Progress",[i,o]=(0,a.createContextScope)(l),[n,d]=i(l),c=t.forwardRef((e,t)=>{var a,l;let{__scopeProgress:i,value:o=null,max:d,getValueLabel:c=x,...u}=e;(d||0===d)&&!f(d)&&console.error((a=`${d}`,`Invalid prop \`max\` of value \`${a}\` supplied to \`Progress\`. Only numbers greater than 0 are valid max values. Defaulting to \`100\`.`));let m=f(d)?d:100;null===o||v(o,m)||console.error((l=`${o}`,`Invalid prop \`value\` of value \`${l}\` supplied to \`Progress\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or 100 if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`));let g=v(o,m)?o:null,j=h(g)?c(g,m):void 0;return(0,s.jsx)(n,{scope:i,value:g,max:m,children:(0,s.jsx)(r.Primitive.div,{"aria-valuemax":m,"aria-valuemin":0,"aria-valuenow":h(g)?g:void 0,"aria-valuetext":j,role:"progressbar","data-state":p(g,m),"data-value":g??void 0,"data-max":m,...u,ref:t})})});c.displayName=l;var u="ProgressIndicator",m=t.forwardRef((e,t)=>{let{__scopeProgress:a,...l}=e,i=d(u,a);return(0,s.jsx)(r.Primitive.div,{"data-state":p(i.value,i.max),"data-value":i.value??void 0,"data-max":i.max,...l,ref:t})});function x(e,s){return`${Math.round(e/s*100)}%`}function p(e,s){return null==e?"indeterminate":e===s?"complete":"loading"}function h(e){return"number"==typeof e}function f(e){return h(e)&&!isNaN(e)&&e>0}function v(e,s){return h(e)&&!isNaN(e)&&e<=s&&e>=0}m.displayName=u;var g=e.i(47163);let j=t.forwardRef(({className:e,value:t,...a},r)=>(0,s.jsx)(c,{ref:r,className:(0,g.cn)("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",e),...a,children:(0,s.jsx)(m,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));j.displayName=c.displayName,e.s(["Progress",()=>j],87336)},30652,67634,e=>{"use strict";var s=e.i(52594);let t=(0,s.default)("circle-check-big",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);e.s(["CheckCircle",()=>t],30652);let a=(0,s.default)("circle-x",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);e.s(["XCircle",()=>a],67634)},40922,e=>{"use strict";let s=(0,e.i(52594).default)("clock",[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);e.s(["Clock",()=>s],40922)},50421,e=>{"use strict";var s=e.i(32086),t=e.i(89762),a=e.i(66815),r=e.i(49533),l=e.i(30652),i=e.i(67634),o=e.i(40922),n=e.i(70065),d=e.i(87336),c=e.i(94179),u=e.i(67881),m=e.i(76336);function x({bookId:e,bookTitle:x,initialTaskId:p,onComplete:h,onError:f}){let v=(0,a.useRouter)(),g=(0,m.useBookGenerationUpdates)(e),[j,b]=(0,t.useState)(!0);if((0,t.useEffect)(()=>{"completed"===g.status?setTimeout(()=>{h?.(),b(!1)},3e3):"failed"===g.status&&f?.()},[g.status,h,f]),!j)return null;let N=(()=>{switch(g.status){case"completed":return{icon:l.CheckCircle,color:"text-green-600",bgColor:"bg-green-100 dark:bg-green-900",title:"GeraÃ§Ã£o ConcluÃ­da! ðŸŽ‰",description:"Seu livro estÃ¡ pronto para visualizaÃ§Ã£o"};case"failed":return{icon:i.XCircle,color:"text-red-600",bgColor:"bg-red-100 dark:bg-red-900",title:"Erro na GeraÃ§Ã£o",description:"Houve um problema ao gerar seu livro"};default:return{icon:r.Loader2,color:"text-blue-600",bgColor:"bg-blue-100 dark:bg-blue-900",title:"Gerando seu livro...",description:"Nossa IA estÃ¡ criando seu conteÃºdo personalizado"}}})(),k=N.icon,C=g.progress||0;return(0,s.jsxs)(n.Card,{className:`${N.bgColor} border-l-4 ${"completed"===g.status?"border-l-green-500":"failed"===g.status?"border-l-red-500":"border-l-blue-500"}`,children:[(0,s.jsx)(n.CardHeader,{className:"pb-3",children:(0,s.jsxs)("div",{className:"flex items-center justify-between",children:[(0,s.jsxs)("div",{className:"flex items-center gap-3",children:[(0,s.jsx)(k,{className:`h-6 w-6 ${N.color} ${"processing"===g.status?"animate-spin":""}`}),(0,s.jsxs)("div",{children:[(0,s.jsx)(n.CardTitle,{className:"text-lg",children:N.title}),(0,s.jsx)(n.CardDescription,{className:"text-sm",children:N.description})]})]}),(0,s.jsx)(c.Badge,{variant:"completed"===g.status?"default":"failed"===g.status?"destructive":"secondary",children:"completed"===g.status?"ConcluÃ­do":"failed"===g.status?"Falhou":"Processando"})]})}),(0,s.jsxs)(n.CardContent,{className:"space-y-4",children:[(0,s.jsxs)("div",{className:"p-3 bg-background/50 rounded-lg",children:[(0,s.jsx)("h3",{className:"font-semibold text-sm mb-1",children:x}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:g.taskId&&`ID da tarefa: ${g.taskId}`})]}),"failed"!==g.status&&(0,s.jsxs)("div",{className:"space-y-2",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center",children:[(0,s.jsx)("span",{className:"text-sm font-medium",children:"Progresso"}),(0,s.jsxs)("span",{className:"text-sm text-muted-foreground",children:[C,"%"]})]}),(0,s.jsx)(d.Progress,{value:C,className:"h-2"})]}),g.currentStep&&(0,s.jsxs)("div",{className:"flex items-center gap-2 text-sm",children:[(0,s.jsx)(o.Clock,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)("span",{className:"text-muted-foreground",children:g.currentStep})]}),g.message&&(0,s.jsx)("div",{className:"p-2 bg-background/30 rounded text-sm",children:g.message}),"processing"===g.status&&(0,s.jsx)("div",{className:"text-xs text-muted-foreground text-center",children:"Tempo estimado: 2-5 minutos"}),"completed"===g.status&&(0,s.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,s.jsx)(u.Button,{size:"sm",onClick:()=>v.push(`/dashboard/books/${e}`),className:"flex-1",children:"Ver Livro"}),(0,s.jsx)(u.Button,{size:"sm",variant:"outline",onClick:()=>b(!1),children:"Fechar"})]}),"failed"===g.status&&(0,s.jsxs)("div",{className:"flex gap-2 pt-2",children:[(0,s.jsx)(u.Button,{size:"sm",variant:"outline",onClick:()=>v.refresh(),className:"flex-1",children:"Tentar Novamente"}),(0,s.jsx)(u.Button,{size:"sm",variant:"outline",onClick:()=>b(!1),children:"Fechar"})]})]})]})}function p({bookId:e,bookTitle:t,status:o,progress:n=0,message:c}){let m=(0,a.useRouter)();return(0,s.jsxs)("div",{className:"flex items-start gap-3 p-3 bg-background border rounded-lg",children:[(()=>{switch(o){case"completed":return(0,s.jsx)(l.CheckCircle,{className:"h-5 w-5 text-green-600"});case"failed":return(0,s.jsx)(i.XCircle,{className:"h-5 w-5 text-red-600"});default:return(0,s.jsx)(r.Loader2,{className:"h-5 w-5 text-blue-600 animate-spin"})}})(),(0,s.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,s.jsx)("h4",{className:"text-sm font-medium truncate",children:t}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground",children:c||`Status: ${o}`}),"processing"===o&&(0,s.jsxs)("div",{className:"mt-2",children:[(0,s.jsxs)("div",{className:"flex justify-between text-xs mb-1",children:[(0,s.jsx)("span",{children:"Progresso"}),(0,s.jsxs)("span",{children:[n,"%"]})]}),(0,s.jsx)(d.Progress,{value:n,className:"h-1"})]})]}),"completed"===o&&(0,s.jsx)(u.Button,{size:"sm",variant:"outline",onClick:()=>m.push(`/dashboard/books/${e}`),children:"Ver"})]})}e.s(["BookGenerationNotification",()=>p,"BookGenerationProgress",()=>x])},98264,e=>{e.n(e.i(50421))}]);